<div align="center">
<img src="https://github.com/xrgzs/sdlp/assets/26499123/1b2af287-6ee9-4795-9404-83b9687d7cf4" alt="XRSOFT_LOGO_ROUND_1024" width="20%" />

# è½¯ä»¶ä¸‹è½½é“¾æ¥è§£æå™¨

ä¸€ä¸ªç”¨äºæ”¶é›†ä¸åŒè½¯ä»¶ç›´æ¥ä¸‹è½½é“¾æ¥è§£ææ–¹å¼çš„åç«¯é¡¹ç›®ï¼Œæ½‡ç„¶ç³»ç»Ÿçš„å­é¡¹ç›®ä¹‹ä¸€ğŸŒŸğŸš€

</div>

## æ¥å£

### è‡ªåŠ¨è·³è½¬è½¯ä»¶å®˜ç½‘ä¸‹è½½é“¾æ¥

#### ç«ç»’å®‰å…¨è½¯ä»¶ç”µè„‘ç‰ˆ

<http://your-domain/soft/huorong> ç›´æ¥ä¸‹è½½ ç«ç»’

#### å¾®ä¿¡è¾“å…¥æ³•

<http://your-domain/soft/wetype> ç›´æ¥ä¸‹è½½ å¾®ä¿¡è¾“å…¥æ³•

#### ç™¾åº¦æ‹¼éŸ³è¾“å…¥æ³•

<http://your-domain/soft/baidupinyin> ç›´æ¥ä¸‹è½½ ç™¾åº¦æ‹¼éŸ³è¾“å…¥æ³•

#### å‘æ—¥è‘µ

å‚æ•°ï¼š`name` è½¯ä»¶åç§°

å‚æ•°ï¼š`x64` 64ä½ç‰ˆæœ¬

<http://your-domain/soft/sunlogin?name=SUNLOGIN_X_WINDOWS> ç›´æ¥ä¸‹è½½ å‘æ—¥è‘µä¸ªäººç‰ˆ 32ä½

<http://your-domain/soft/sunlogin?name=SUNLOGIN_X_WINDOWS&x64=1> ç›´æ¥ä¸‹è½½ å‘æ—¥è‘µä¸ªäººç‰ˆ 64ä½

<http://your-domain/soft/sunlogin?name=SUNLOGIN_WINDOWS> ç›´æ¥ä¸‹è½½ å‘æ—¥è‘µä¼ä¸šç‰ˆ æ§åˆ¶ç«¯ 32ä½

<http://your-domain/soft/sunlogin?name=SUNLOGIN_WINDOWS&x64=1> ç›´æ¥ä¸‹è½½ å‘æ—¥è‘µä¼ä¸šç‰ˆ æ§åˆ¶ç«¯ 64ä½

<http://your-domain/soft/sunlogin?name=SLRC_WINDOWS_ENT> ç›´æ¥ä¸‹è½½ å‘æ—¥è‘µä¼ä¸šç‰ˆ å®¢æˆ·ç«¯ 32ä½

<http://your-domain/soft/sunlogin?name=SLRC_WINDOWS_ENT&x64=1> ç›´æ¥ä¸‹è½½ å‘æ—¥è‘µä¼ä¸šç‰ˆ å®¢æˆ·ç«¯ 64ä½

<http://your-domain/soft/sunlogin?name=SL_WINDOWS_LITE> ç›´æ¥ä¸‹è½½ å‘æ—¥è‘µSOSç‰ˆ 32ä½

<http://your-domain/soft/sunlogin?name=SL_WINDOWS_LITE&x64=1> ç›´æ¥ä¸‹è½½ å‘æ—¥è‘µSOSç‰ˆ 64ä½

#### RayLink

<http://your-domain/soft/raylink> ç›´æ¥ä¸‹è½½ RayLink å®Œæ•´ç‰ˆ

<http://your-domain/soft/raylink?lite> ç›´æ¥ä¸‹è½½ RayLink Liteç‰ˆ

#### è¿è¿æ§

<http://your-domain/soft/asklink> ç›´æ¥ä¸‹è½½ è¿è¿æ§

#### å¤©ç¿¼ç½‘ç›˜

<http://your-domain/soft/ecloud> ç›´æ¥ä¸‹è½½ å¤©ç¿¼ç½‘ç›˜

### è‡ªåŠ¨è·³è½¬360å®åº“è½¯ä»¶ä¸‹è½½é“¾æ¥

å‚æ•°ï¼š`appid`

å¦‚è½¯ä»¶ä¸‹è½½é¡µé¢ <http://baoku.360.cn/soft/show/appid/104693057> ï¼Œ`104693057`å³ä¸º`appid`

<http://your-domain/360baoku/?appid=104693057> å³å¯ç›´æ¥è·³è½¬åˆ°ä¸‹è½½é“¾æ¥

### è‡ªåŠ¨è·³è½¬è”æƒ³è½¯ä»¶å•†åº—ä¸‹è½½é“¾æ¥

å‚æ•°ï¼š`softid`

å¦‚è½¯ä»¶ä¸‹è½½é¡µé¢ <https://lestore.lenovo.com/detail/13407> ï¼Œ`13407`å³ä¸º`softid`

<http://your-domain/lestore/?softid=13407> å³å¯ç›´æ¥è·³è½¬åˆ°ä¸‹è½½é“¾æ¥

### è‡ªåŠ¨è·³è½¬QQè½¯ä»¶ä¸­å¿ƒä¸‹è½½é“¾æ¥

å‚æ•°ï¼š`softid`

å¦‚è½¯ä»¶ä¸‹è½½é¡µé¢ <https://pc.qq.com/detail/11/detail_351.html> ï¼Œ`351`å³ä¸º`softid`

<http://your-domain/qqsoft/?softid=351> å³å¯ç›´æ¥è·³è½¬åˆ°ä¸‹è½½é“¾æ¥

### è‡ªåŠ¨è·³è½¬QAXè½¯ä»¶ä¸­å¿ƒä¸‹è½½é“¾æ¥

å‚æ•°ï¼š`softid`

<http://your-domain/qaxsoft/?softid=103352> å³å¯ç›´æ¥è·³è½¬åˆ°ä¸‹è½½é“¾æ¥

### è‡ªåŠ¨è·³è½¬HPMæ¨¡å—ä¸‹è½½é“¾æ¥

å‚æ•°ï¼š`name`

æ ¹æ®ç»™å®šåç§°ä½œä¸ºå‰ç¼€æœç´¢ï¼Œä¼˜å…ˆåŒ¹é…æœ€æ–°ä¸Šä¼ çš„ç‰ˆæœ¬

<http://your-domain/hpm/?name=ToDeskå®Œæ•´ç‰ˆ> å³å¯ç›´æ¥è·³è½¬åˆ° ToDeskå®Œæ•´ç‰ˆ æœ€æ–°ä¸Šä¼ çš„ä¸‹è½½é“¾æ¥

### è‡ªåŠ¨è·³è½¬Scoopè½¯ä»¶ä¸‹è½½é“¾æ¥

å‚æ•°ï¼š

- `name`ï¼šè½¯ä»¶åç§°
- `bucket`ï¼šå­˜å‚¨åº“åç§°ï¼Œé»˜è®¤ä¸º `ScoopInstaller/Main`
- `branch`ï¼šå­˜å‚¨åº“åˆ†æ”¯ï¼Œé»˜è®¤ä¸º `master`
- `arch`ï¼šæ¶æ„ï¼Œ`64bit`ã€`32bit`ã€`arm64` ç­‰ï¼Œé»˜è®¤ä¸º `64bit`

è½¯ä»¶æœç´¢ï¼š<https://scoop.sh/>

<http://your-domain/scoop/?name=aria2> å³å¯ç›´æ¥è·³è½¬åˆ°ä¸‹è½½é“¾æ¥ï¼Œå¹¶ä¸”ä½¿ç”¨åŠ é€Ÿè¿‡çš„é“¾æ¥

<http://your-domain/scoop/?name=ecloud&bucket=xrgzs/sdoog&branch=master> æŒ‡å®š bucket å’Œ master åˆ†æ”¯

### è‡ªåŠ¨è·³è½¬Windows ISOå®˜æ–¹ä¸‹è½½åœ°å€

æ­¤æ¥å£å†…å®¹å¤æ‚ï¼Œè¯·å‰å¾€ `msdl` ç›®å½•é˜…è¯» `readme.md` æ–‡ä»¶

### è‡ªåŠ¨è·³è½¬GitHub Releaseä¸‹è½½é“¾æ¥

å‚æ•°ï¼š

- `repo`ï¼šï¼ˆå¿…å¡«ï¼‰GitHub ä»“åº“åç§°ï¼Œä¾‹å¦‚ `myusername/myrepo`

- `tag`ï¼šï¼ˆå¯é€‰ï¼‰ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ `1.0.0`

  - å¦‚æœæœªæŒ‡å®šï¼Œé»˜è®¤ä½¿ç”¨ `latest`

- `search`ï¼šï¼ˆå¯é€‰ï¼‰æœç´¢å…³é”®è¯ï¼Œä¾‹å¦‚ `win_x64`

  - å¦‚æœæœªæŒ‡å®šï¼Œé»˜è®¤åŒ¹é…æœ€åä¸€ä¸ª release æ–‡ä»¶

- `filter`ï¼šï¼ˆå¯é€‰ï¼‰äºŒæ¬¡æœç´¢ç»“å°¾å…³é”®è¯ï¼Œä¾‹å¦‚ `.exe`

  - å¦‚æœæœªæŒ‡å®š`search`ï¼Œæ­¤å‚æ•°æ— æ•ˆ
  - åœ¨åŒ¹é…æ–‡ä»¶æ‰©å±•åå‘ç”Ÿå†²çªï¼Œå¦‚è¯¯åŒ¹é…åˆ° `.pdb`ã€`.blockmap`ã€`.sig` ç­‰æ–‡ä»¶æ—¶å¯ä»¥ä½¿ç”¨

- `mirror`ï¼šï¼ˆå¯é€‰ï¼‰ä½¿ç”¨åŠ é€Ÿé•œåƒï¼Œå¦‚ `auto`

ç¤ºä¾‹ï¼š

å‡è®¾ä½ æƒ³æŸ¥æ‰¾ä»“åº“ `myusername/myrepo` ä¸­ç‰ˆæœ¬ä¸º `latest` çš„ç¬¬ä¸€ä¸ª release æ–‡ä»¶ã€‚ä½ å¯ä»¥è®¿é—®ä»¥ä¸‹é“¾æ¥ï¼š

<http://your-domain/ghrelease?repo=myusername/myrepo&tag=1.0.0&search=win_x64>

å‡è®¾ä½ æƒ³æŸ¥æ‰¾ä»“åº“ `myusername/myrepo` ä¸­ç‰ˆæœ¬ä¸º `1.0.0` çš„ release æ–‡ä»¶ï¼Œä¸”æ–‡ä»¶ååŒ…å«å…³é”®è¯ `win_x64`ã€‚ä½ å¯ä»¥è®¿é—®ä»¥ä¸‹é“¾æ¥ï¼š

<http://your-domain/ghrelease?repo=myusername/myrepo&tag=1.0.0&search=win_x64>

å¦‚æœä½ æƒ³ä½¿ç”¨é•œåƒ `auto`ï¼Œåˆ™å¯ä»¥è®¿é—®ï¼š

<http://your-domain/ghrelease?repo=myusername/myrepo&tag=1.0.0&search=win_x64&mirror=auto>

API å°†ç›´æ¥è·³è½¬åˆ°åŒ¹é…çš„ release æ–‡ä»¶é“¾æ¥ï¼Œæˆ–è€…æç¤ºæœªæ‰¾åˆ°åŒ¹é…çš„æ–‡ä»¶ã€‚

### è“å¥API

å‚æ•°ï¼š

- `url`ï¼šè“å¥äº‘å¤–é“¾é“¾æ¥
- `type`ï¼šæ˜¯å¦ç›´æ¥ä¸‹è½½ å€¼ï¼š`down`
- `pwd`ï¼šå¤–é“¾å¯†ç 

ç›´æ¥ä¸‹è½½ï¼š

- æ— å¯†ç ï¼š<http://your-domain/lanzou/?url=https://www.lanzoup.com/i6th9cd&type=down>
- æœ‰å¯†ç ï¼š<http://your-domain/lanzou/?url=https://www.lanzoup.com/i42Xxebssfg&type=down&pwd=1234>

è¾“å‡ºç›´é“¾ï¼š

- æ— å¯†ç ï¼š<http://your-domain/lanzou/?url=https://www.lanzoup.com/i6th9cd>
- æœ‰å¯†ç ï¼š<http://your-domain/lanzou/?url=https://www.lanzoup.com/i42Xxebssfg&pwd=1234>

### éšæœºå›¾API

ç›´æ¥è·³è½¬åˆ°å¯¹åº”å›¾ç‰‡

- è‡ªåŠ¨åˆ‡æ¢æ¥å£ï¼ˆæ— äºŒæ¬¡å…ƒï¼‰

  ![](http://your-domain/wall/)

- å¯¹æ¥ Alist çš„ç²¾é€‰å›¾åº“ï¼ˆOneDrive ç¼©ç•¥å›¾è½¬ç æœåŠ¡ï¼‰ï¼ˆæ— äºŒæ¬¡å…ƒï¼‰

  ![](http://your-domain/wall/alist.php)

- å¿…åº”ä»Šæ—¥å›¾ç‰‡

  ![](http://your-domain/wall/bingtoday.php)

- å¿…åº”éšæœºå›¾ç‰‡

  ![](http://your-domain/wall/bingrand.php)

- iTab æ ‡ç­¾é¡µï¼ˆæ— äºŒæ¬¡å…ƒï¼‰

  ![](http://your-domain/wall/itab.php)

- iTab æ ‡ç­¾é¡µéšæœº

  ![](http://your-domain/wall/itabrand.php)

- WeTab æ ‡ç­¾é¡µï¼ˆæ— äºŒæ¬¡å…ƒï¼‰

  ![](http://your-domain/wall/wetab.php)

- WeTab æ ‡ç­¾é¡µéšæœº

  ![](http://your-domain/wall/wetabrand.php)

## éƒ¨ç½²

- HTTP Web Server
  - æ­¤å¤„ä½¿ç”¨ 1Panel ç¯å¢ƒ

- PHP å»ºè®®ä½¿ç”¨8.1+
  - å¯ç”¨ `CURL`æ‰©å±•
- å…‹éš†æœ¬ä»“åº“åˆ°æœåŠ¡å™¨çš„ç½‘ç«™ç›®å½•
- éƒ¨åˆ†éœ€è¦é…ç½®æœ¬åœ°åä»£ï¼Œå¹¶æ›¿æ¢æ–‡ä»¶å†…æ¥å£
- PHPæ˜¯â€œæœ€å¥½çš„â€è¯­è¨€ï¼Œæ‰€ä»¥è¯·åŠ¡å¿…é…ç½® WAF

## å®‰è£…

åˆ›å»ºè¿è¡Œç¯å¢ƒï¼šPHP 8ï¼Œå¸¦ä¸Šæ‰©å±• `curl`ã€`apcu`ï¼ˆå¯é€‰ï¼Œä¸å®‰è£…æ— ç¼“å­˜ï¼‰

åˆ›å»ºç½‘ç«™ï¼šè¿è¡Œç¯å¢ƒ PHP 8ï¼Œä¸»åŸŸåï¼š`your-domain`

è¿›å…¥ç½‘ç«™ç›®å½•ï¼Œæ‰“å¼€ç»ˆç«¯

```bash
cd /opt/1panel/apps/openresty/openresty/www/sites/your-domain/index
```

å…‹éš†æ­¤ä»“åº“ï¼š

```bash
git clone https://gh.xrgzs.top/https://github.com/xrgzs/sdlp.git
```

é…ç½® NGINXï¼šè¿è¡Œç›®å½• `/sdlp`

```nginx
root /www/sites/your-domain/index/sdlp; 
```

## æ›´æ–°

```bash
cd /opt/1panel/apps/openresty/openresty/www/sites/your-domain/index/sdlp
git pull
```

å¼ºåˆ¶æ›´æ–°ï¼š

```bash
cd /opt/1panel/apps/openresty/openresty/www/sites/your-domain/index/sdlp
git fetch && git reset --hard origin/main
```

## é…ç½®

### åä»£ GitHub API

ä¸ºäº†æœ€å¤§ç¨‹åº¦ä¸Šé¿å…è¯·æ±‚é™åˆ¶ï¼Œè¯·åå‘ä»£ç† GitHub APIï¼Œè®¾ç½®æ‚¨è‡ªå·±çš„ GitHub Token å¹¶å¢åŠ ç¼“å­˜ï¼Œæœ€å¥½æ˜¯åœ¨æœ¬åœ°ã€‚å¦‚æœæ‚¨çš„æœåŠ¡å™¨æœ‰å¾ˆå¤šäººä½¿ç”¨ï¼Œå»ºè®®æœ¬åœ° hosts + è¯ä¹¦åŠ«æŒ GitHub API åŸŸåã€‚

å¦‚æœéœ€è¦æœ¬åœ°åŠ«æŒ hosts ä»£ç† Github APIï¼Œè¯·å‚è€ƒï¼š<https://zhuanlan.zhihu.com/p/411165246>

åˆ›å»ºç½‘ç«™ï¼šåå‘ä»£ç†ï¼Œä¸»åŸŸåï¼š`api.gh.local:8002`ï¼ˆè™šæ„ï¼‰ï¼Œä»£ç†åœ°å€ï¼š`https://api.github.com`

æ³¨æ„ï¼šæ­¤å¤„çš„8002ç«¯å£å¹¶æœªå»ºç«™ï¼Œä½¿ç”¨æœºå™¨çš„ä»»æ„IPã€ä»»æ„åŸŸåè®¿é—®8002ç«¯å£å‡ä¸ºGitHub APIåä»£ï¼Œå»ºè®®é…ç½®æœºå™¨é˜²ç«å¢™ï¼Œä¸è¦è®©å¤–éƒ¨è®¿é—®ï¼Œå¦‚æœä¸æ–¹ä¾¿é…ç½®ï¼Œé‚£å°±å¡«å†™ 1panel-network çš„åœ°å€ï¼š`172.18.0.1:8002`, ä½¿ç”¨ IP + ç«¯å£ è®¿é—®é¿å…è®¾ç½® PHP å®¹å™¨çš„ hosts

æ›¿æ¢åå‘ä»£ç†å†…å®¹ï¼šAuthorizationåé¢çš„å†…å®¹ä¸ºæ‚¨çš„GitHub Tokenï¼Œæ­¤å¤„å¢åŠ äº†1hçš„ç¼“å­˜

```nginx
location ^~ / {
    proxy_pass https://api.github.com; 
    proxy_set_header Host api.github.com; 
    proxy_set_header X-Real-IP $remote_addr; 
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; 
    proxy_set_header REMOTE-HOST $remote_addr; 
    proxy_set_header Upgrade $http_upgrade; 
    proxy_set_header Connection "upgrade"; 
    proxy_set_header X-Forwarded-Proto $scheme; 
    proxy_set_header Authorization "***********************************************";
    proxy_http_version 1.1; 
    add_header X-Cache $upstream_cache_status; 
    proxy_ignore_headers Set-Cookie Cache-Control expires; 
    proxy_cache proxy_cache_panel; 
    proxy_cache_key $host$uri$is_args$args; 
    proxy_cache_valid 200 1h; 
}
```

æ›¿æ¢ ghrelease åä»£å†…å®¹ï¼šæ­¤å¤„åä»£ api.github.com åˆ° 1panel-network çš„ 8002 ç«¯å£

```bash
cd /opt/1panel/apps/openresty/openresty/www/sites/your-domain/index/sdlp
gateway_ip=$(docker network inspect 1panel-network | grep '"Gateway"' | awk -F'"' '{print $4}')
echo "Gateway IP: $gateway_ip"
sed -i "s/https:\/\/api.github.com/http:\/\/$gateway_ip:8002/g" ./ghrelease/index.php
```

æ¯æ¬¡æ›´æ–°åéƒ½éœ€è¦æ‰§è¡Œä¸Šé¢çš„å†…å®¹
